<!DOCTYPE html>
<html>
<head>
    <title>Sentron Home</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container mt-4 text-center">
        <h1 class="heading">📹 Live Feed - Sentron</h1>
        <img src="{{ url_for('video_feed') }}" class="video-feed mt-3 mb-3">
        <button class="btn capture-btn">Capture Snapshot</button> <!-- Unique class -->
        <div class="d-flex justify-content-center mt-4 gap-3"> <!-- Added gap-3 for spacing -->
            <div class="button-box">
                <a href="{{ url_for('threats') }}">
                    <button class="btn">⚠️ View Threat Log</button>
                </a>
            </div>
            <div class="button-box">
                <a href="{{ url_for('snapshots') }}">
                    <button class="btn">📸 View Snapshots</button>
                </a>
            </div>
            <div class="button-box">
                <a href="{{ url_for('logout') }}">
                    <button class="btn">🔓 Logout</button>
                </a>
            </div>
        </div>
    </div>

    <script>
        document.querySelectorAll('.capture-btn').forEach(button => {
            button.addEventListener('click', function() {
                fetch('/capture_snapshot/unknown')
                    .then(response => {
                        if (response.ok) {
                            alert('Snapshot captured!');
                        } else {
                            alert('Failed to capture snapshot.');
                        }
                    })
                    .catch(() => alert('Error capturing snapshot.'));
            });
        });
    </script>
</body>
</html>